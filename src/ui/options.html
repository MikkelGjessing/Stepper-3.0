<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stepper 3.0 - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Stepper 3.0 Settings</h1>
      <p class="subtitle">Configure your step-by-step guide assistant</p>
    </header>

    <main class="content">
      <form id="settingsForm">
        <!-- Repository Source Section -->
        <section class="settings-section">
          <h2 class="section-title">üìö Repository Source</h2>
          
          <div class="form-group">
            <label class="label">Source Type</label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="repoSourceType" value="url" id="sourceTypeUrl">
                <span>URL Repository</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="repoSourceType" value="azure" id="sourceTypeAzure">
                <span>Azure DevOps</span>
              </label>
            </div>
          </div>

          <div class="form-group" id="urlGroup">
            <label class="label" for="repoUrl">Repository URL</label>
            <input 
              type="url" 
              id="repoUrl" 
              class="input" 
              placeholder="https://example.com/articles"
            />
            <span class="help-text">URL to fetch article repository</span>
          </div>

          <div class="form-group" id="azureGroup" style="display: none;">
            <label class="label" for="azureApiBaseUrl">Azure DevOps API Base URL</label>
            <input 
              type="url" 
              id="azureApiBaseUrl" 
              class="input" 
              placeholder="https://dev.azure.com/organization"
            />
            <span class="help-text">Base URL for Azure DevOps API</span>
          </div>

          <div class="form-group" id="azurePatGroup" style="display: none;">
            <label class="label" for="azurePat">Personal Access Token (PAT)</label>
            <input 
              type="password" 
              id="azurePat" 
              class="input" 
              placeholder="Enter your Azure DevOps PAT"
            />
            <span class="help-text">Token for authentication with Azure DevOps</span>
          </div>

          <div class="button-group">
            <button type="button" class="btn btn-primary" id="syncRepoBtn">
              üîÑ Sync Now
            </button>
          </div>
          
          <div id="syncStatus" style="margin-top: 10px;"></div>
          <div id="repoArticlesCount" style="margin-top: 10px; color: #666;"></div>
        </section>

        <!-- Features Section -->
        <section class="settings-section">
          <h2 class="section-title">‚ö° Features</h2>
          
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="enableDummyArticles" class="checkbox">
              <span>Enable Demo Articles</span>
            </label>
            <span class="help-text">Allow creation of dummy/demo articles for testing</span>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="enableLLMSearch" class="checkbox">
              <span>Enable LLM-Powered Search</span>
            </label>
            <span class="help-text">Use AI/LLM for enhanced search capabilities</span>
          </div>
        </section>

        <!-- LLM Configuration Section -->
        <section class="settings-section" id="llmSection" style="display: none;">
          <h2 class="section-title">ü§ñ LLM Configuration</h2>
          
          <div class="form-group">
            <label class="label" for="llmEndpoint">LLM Endpoint</label>
            <input 
              type="url" 
              id="llmEndpoint" 
              class="input" 
              placeholder="https://api.openai.com/v1/chat/completions"
            />
            <span class="help-text">API endpoint for LLM service</span>
          </div>

          <div class="form-group">
            <label class="label" for="llmApiKey">API Key</label>
            <input 
              type="password" 
              id="llmApiKey" 
              class="input" 
              placeholder="Enter your LLM API key"
            />
            <span class="help-text">Authentication key for LLM service</span>
          </div>

          <div class="form-group">
            <label class="label" for="llmModel">Model Name</label>
            <input 
              type="text" 
              id="llmModel" 
              class="input" 
              placeholder="gpt-3.5-turbo"
            />
            <span class="help-text">LLM model name (e.g., gpt-3.5-turbo, gpt-4, gpt-4-turbo)</span>
          </div>
        </section>

        <!-- Upload Articles Section -->
        <section class="settings-section">
          <h2 class="section-title">üì§ Upload Articles</h2>
          
          <div class="form-group">
            <label class="label" for="articleFile">Select Article File</label>
            <input 
              type="file" 
              id="articleFile" 
              class="input" 
              accept=".md,.html,.txt,.json"
            />
            <span class="help-text">Supported formats: Markdown (.md), HTML (.html), Text (.txt), JSON (.json)</span>
          </div>
          
          <div class="button-group">
            <button type="button" class="btn btn-primary" id="importArticleBtn">
              üì• Import
            </button>
            <button type="button" class="btn btn-secondary" id="clearUploadedArticlesBtn">
              üóëÔ∏è Clear Uploaded Articles
            </button>
          </div>
          
          <div id="uploadStatus" style="margin-top: 10px;"></div>
          <div id="uploadedArticlesCount" style="margin-top: 10px; color: #666;"></div>
        </section>

        <!-- Actions Section -->
        <section class="settings-section">
          <h2 class="section-title">üîß Advanced</h2>
          
          <div class="button-group">
            <button type="button" class="btn btn-secondary" id="addDemoArticlesBtn">
              ‚ûï Add Demo Articles
            </button>
            <button type="button" class="btn btn-secondary" id="clearStorageBtn">
              Clear All Data
            </button>
            <button type="button" class="btn btn-secondary" id="exportBtn">
              Export Settings
            </button>
            <button type="button" class="btn btn-secondary" id="importBtn">
              Import Settings
            </button>
          </div>
          <span class="help-text">Warning: Clearing data cannot be undone</span>
        </section>

        <!-- Save/Cancel Buttons -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" id="saveBtn">
            üíæ Save Settings
          </button>
          <button type="button" class="btn btn-secondary" id="resetBtn">
            üîÑ Reset to Defaults
          </button>
          <button type="button" class="btn btn-secondary" id="cancelBtn">
            Cancel
          </button>
        </div>
      </form>

      <!-- Status Message -->
      <div class="status-message" id="statusMessage" style="display: none;"></div>
    </main>

    <footer class="footer">
      <p>Stepper 3.0 - Internal IT Agent Assistant</p>
    </footer>
  </div>

  <script src="../lib/storage.js"></script>
  <script src="../lib/articles.js"></script>
  <script src="options.js"></script>
</body>
</html>
